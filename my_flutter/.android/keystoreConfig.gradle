ext {
    def releaseKeystorePropsFile = rootProject.file("keystore.properties")
    if (releaseKeystorePropsFile.exists()) {
        println "Start extract release keystore config from keystore.properties"
        def keystoreProps = new Properties()
        keystoreProps.load(new FileInputStream(releaseKeystorePropsFile))
        keystoreConfig = [
                storePassword: keystoreProps['storePassword'],
                keyPassword  : keystoreProps['keyPassword'],
                keyAlias     : keystoreProps['keyAlias'],
                storeFile    : keystoreProps['storeFile']
        ]
    } else {
        println "Start extract release keystore config from global vars"
        keystoreConfig = [
                storePassword: "$System.env.STORE_PASSWORD",
                keyPassword  : "$System.env.KEY_PASSWORD",
                keyAlias     : "$System.env.KEY_ALIAS",
                storeFile    : "$System.env.STORE_FILE"
        ]
    }
    if(!keystoreConfig.storeFile) {
        keystoreConfig.storeFile = "no_keystore_file" //fix crash file(storeFile)
    }
    println "Extracted keystore config: $keystoreConfig"
}